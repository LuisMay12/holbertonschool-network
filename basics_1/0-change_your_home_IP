#!/usr/bin/env bash
# This script sets localhost->127.0.0.2 and facebook.com->8.8.8.8 in /etc/hosts safely (no in-place rename)

set -euo pipefail

tmpfile="$(mktemp)"
# Remove any lines that mention ' localhost ' or ' facebook.com ' to avoid duplicates
grep -vE '(^|[[:space:]])localhost([[:space:]]|$)|(^|[[:space:]])facebook\.com([[:space:]]|$)' /etc/hosts > "$tmpfile"

# Prepend our desired mappings and write back to /etc/hosts using sudo tee
{
  printf '%s\n' '127.0.0.2 localhost'
  printf '%s\n' '8.8.8.8 facebook.com'
  cat "$tmpfile"
} | sudo tee /etc/hosts >/dev/null

rm -f "$tmpfile"
